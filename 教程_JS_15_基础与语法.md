# JavaScript 第 15 步：基础与语法

配套演示：HTMLlearning/15_js_basics.html

## 目标
- 掌握 let/const、基础类型与真值/假值。
- 熟悉条件/循环与数组迭代（map/filter/reduce/find）。
- 了解函数声明/表达式/箭头、默认值、rest 参数与闭包概念。
- 会用解构/展开、对象属性简写、不可变更新写法。
- 认识 ES 模块：`<script type="module">`、export/import 的基本用法。

---

## 1. 变量与类型
- 声明：`const` 优先，`let` 其次，尽量不用 `var`。
- 原始类型：string, number, boolean, null, undefined, symbol, bigint。
- 真假值：`'' 0 NaN null undefined false` 为假，其他为真；用 `Boolean(value)` 或 `!!value` 判断。
- 模板字符串：`` `Hi ${name}` ``；推荐用于拼接。
- 解构/展开：
  ```js
  const user = { name: 'Ada', level: 3 };
  const { name } = user;
  const scores = [92, 85, 77];
  const [first, ...rest] = scores;
  const clone = { ...user, level: 4 };
  const merged = [...scores, 100];
  ```

## 2. 条件、循环与逻辑
- 比较用 `===`，少用 `==`。
- 短路与空值：`a && b`、`a || b`、`a ?? b`、可选链 `obj?.prop`。
- 循环：`for...of`、`forEach`；数组推荐：`map/filter/reduce/find/some/every`。
  ```js
  const passed = scores.filter(s => s >= 80);
  const labels = passed.map((s, i) => `#${i + 1}: ${s}`);
  const total = scores.reduce((t, n) => t + n, 0);
  ```

## 3. 函数与作用域
- 形态：函数声明、函数表达式、箭头函数；箭头函数不绑定 `this`。
- 默认值与 rest：`function greet(name = 'friend') {}`、`const sum = (...nums) => nums.reduce(...)`。
- 闭包简述：函数可以访问其外层作用域的变量；常用于工厂函数、私有状态。

## 4. 对象与数组的不可变更新
- 对象：`{ ...obj, key: newValue }`
- 数组：追加 `[...arr, x]`，替换 `arr.map(...)`，过滤 `arr.filter(...)`。

## 5. 模块基础（type="module"）
- 在 HTML 中：`<script type="module" src="main.js"></script>` 或内联。
- 导出：`export function double(n){ return n * 2 }`
- 导入：`import { double } from './js/utils.js'`
- 作用：避免全局变量污染，支持分文件组织。

## 6. 错误处理
```js
try {
  const data = JSON.parse('{bad}');
} catch (err) {
  console.error('解析失败', err.message);
}
```

---

## 实践任务
1) 待办列表（内存版）：新增、删除、完成切换；用数组迭代渲染到 DOM。
2) 计数器组件：加/减按钮、步进输入、重置；展示当前值。
3) 成绩统计：给定数组，输出总分/平均/最高/及格率；用 `reduce`/`map` 实现。
4) 模块拆分：把工具函数放 `js/utils.js`，主模块导入使用；全部脚本用 `type="module"`。

---

## 小提示
- 统一用 `const/let`，避免 `var`。
- 优先数组方法（map/filter/reduce），少写命令式 `for`。
- DOM 事件尽量委托在容器上，便于后续组件化。
- 控制台和页面同时输出，方便排查。
