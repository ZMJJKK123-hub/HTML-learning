<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CSS ç¬¬13æ­¥ï¼šå˜é‡ã€ä¸»é¢˜ã€å±‚å ä¸å·¥ç¨‹åŒ–</title>
  <style>
    /* 1) è®¾è®¡ä»¤ç‰Œï¼ˆDesign Tokensï¼‰ä¸ CSS å˜é‡ï¼ˆCustom Propertiesï¼‰ */
    :root{
      --color-brand: #3b82f6;
      --color-brand-strong: #2563eb;
      --color-bg: #f7f8fb;
      --color-card: #ffffff;
      --color-text: #0f172a;
      --color-muted: #64748b;
      --radius: 12px;
      --shadow: 0 6px 20px rgba(17,24,39,.08);
      --sp-1: 6px; --sp-2: 10px; --sp-3: 14px; --sp-4: 18px; --sp-5: 24px;
    }

    /* 2) ä¸»é¢˜ï¼ˆThemingï¼‰ï¼šé€šè¿‡ data-theme åˆ‡æ¢å˜é‡å€¼ */
    html[data-theme="dark"]{
      --color-bg: #0b1020;
      --color-card: #0f172a;
      --color-text: #e5e7eb;
      --color-muted: #94a3b8;
      --shadow: 0 8px 28px rgba(0,0,0,.35);
    }

    /* 3) åŸºç¡€æ ·å¼ï¼ˆä½¿ç”¨å˜é‡ï¼‰ */
    *{ box-sizing:border-box }
    html,body{ margin:0; padding:0 }
    body{
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Microsoft YaHei",sans-serif;
      color:var(--color-text); background:var(--color-bg); line-height:1.6;
    }
    .container{ max-width:1080px; margin:0 auto; padding:var(--sp-5) }

    /* 4) å±‚å å±‚ï¼ˆCascade Layersï¼‰ï¼šæ§åˆ¶å¤§ç±»æ ·å¼çš„ä¼˜å…ˆé¡ºåº */
    /* å£°æ˜é¡ºåºå†³å®šå±‚çš„ä¼˜å…ˆçº§ï¼šutilities > components > base */
    @layer base, components, utilities;

    @layer base{
      header{
        background: linear-gradient(135deg, var(--color-brand), var(--color-brand-strong));
        color:#fff; border-radius:var(--radius); padding:28px var(--sp-5); margin-bottom:var(--sp-5); text-align:center;
        box-shadow: var(--shadow);
      }
      header h1{ margin:0 0 var(--sp-2) }
      section{
        background:var(--color-card); border-radius:var(--radius); box-shadow: var(--shadow);
        padding:var(--sp-4); margin-bottom:var(--sp-4);
      }
      h2{ color:var(--color-brand); border-bottom:2px solid var(--color-brand); padding-bottom:8px; margin-top:0 }
      .code{ background:#0b1020; color:#e5e7eb; border-radius:8px; padding:var(--sp-3); overflow:auto; font:14px/1.5 ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace; margin:var(--sp-3) 0 }
      .note{ background:#fffbe6; border-left:4px solid #f59e0b; padding:var(--sp-2) var(--sp-3); border-radius:6px; margin:var(--sp-3) 0; color:#4b5563 }
      html[data-theme="dark"] .code{ background:#0b1020 }
      html[data-theme="dark"] .note{ background:#1f2937; color:#e5e7eb; border-left-color:#f59e0b }
    }

    @layer components{
      .btn{
        background:var(--color-brand); color:#fff; border:none; border-radius:10px;
        padding:10px 14px; cursor:pointer; transition: transform .2s ease, filter .2s ease;
      }
      .btn:hover{ transform: translateY(-2px); filter:brightness(1.05) }
      .btn.secondary{ background:#111827 }

      .card{ border:1px solid rgba(100,116,139,.2); border-radius:var(--radius); padding:var(--sp-4); background:var(--color-card); box-shadow: var(--shadow) }
      .card__title{ font-weight:600; margin:0 0 var(--sp-2) }
      .card__desc{ color:var(--color-muted); margin:0 }

      /* BEM ç¤ºä¾‹ï¼š.block__element--modifier */
      .badge{ display:inline-block; padding:4px 8px; border-radius:999px; font-size:12px }
      .badge--info{ background:#e0f2fe; color:#0ea5e9 }
      .badge--ok{ background:#dcfce7; color:#16a34a }
      .badge--warn{ background:#fef3c7; color:#d97706 }
    }

    @layer utilities{
      .flex{ display:flex }
      .items-center{ align-items:center }
      .justify-between{ justify-content:space-between }
      .gap-2{ gap: var(--sp-2) }
      .gap-3{ gap: var(--sp-3) }
      .mt-2{ margin-top: var(--sp-2) }
      .mt-3{ margin-top: var(--sp-3) }
      .mt-4{ margin-top: var(--sp-4) }
      .w-100{ width:100% }
    }

    /* 5) ç‰¹å¼‚æ€§ç®¡ç†ï¼š:where() ä¸ :is() é™ä½/é›†ä¸­ç‰¹å¼‚æ€§ */
    /* :where() å†…çš„é€‰æ‹©å™¨ç‰¹å¼‚æ€§ä¸º 0ï¼Œæœ‰åŠ©äºç»„ä»¶å¯è¦†ç›– */
    :where(.prose) h1{ font-size:clamp(1.5rem, 2.8vw, 2.25rem); margin:0 0 var(--sp-2) }
    :where(.prose) p{ margin:0 0 var(--sp-2); color:var(--color-muted) }
    /* :is() èšåˆé€‰æ‹©å™¨ä½†ä¿ç•™æœ€å³é€‰æ‹©å™¨çš„ç‰¹å¼‚æ€§ */
    .nav :is(a, button){ color:inherit; text-decoration:none }

    /* 6) ä½œç”¨åŸŸå»ºè®®ï¼šçˆ¶çº§é™å®šï¼ˆç±»åå®¹å™¨ï¼‰ */
    .demo-scope .title{ color:var(--color-brand-strong) }

    /* 7) ç”¨æˆ·é…è‰²åå¥½ï¼ˆé»˜è®¤è·Ÿéšç³»ç»Ÿï¼‰ */
    @media (prefers-color-scheme: dark){
      /* åˆè½½å…¥æ—¶è‹¥ç³»ç»Ÿåå¥½æš—è‰²ï¼Œä¼˜å…ˆç”¨æš—è‰²ä¸»é¢˜ï¼ˆè‹¥æ— æ‰‹åŠ¨é€‰æ‹©ï¼‰ */
      html[data-theme="system"]{ --color-bg:#0b1020; --color-card:#0f172a; --color-text:#e5e7eb; --color-muted:#94a3b8; --shadow:0 8px 28px rgba(0,0,0,.35) }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="flex items-center justify-between">
      <div>
        <h1>ğŸ›ï¸ CSS ç¬¬ 13 æ­¥ï¼šå˜é‡ã€ä¸»é¢˜ã€å±‚å ä¸å·¥ç¨‹åŒ–</h1>
        <p style="opacity:.9">ç”¨è®¾è®¡ä»¤ç‰Œç»Ÿä¸€é£æ ¼ï¼Œå€ŸåŠ©ä¸»é¢˜ä¸å±‚å å±‚æå‡å¯ç»´æŠ¤æ€§</p>
      </div>
      <div class="flex gap-2">
        <button class="btn" data-theme="light">æµ…è‰²</button>
        <button class="btn" data-theme="dark">æ·±è‰²</button>
        <button class="btn secondary" data-theme="system">è·Ÿéšç³»ç»Ÿ</button>
      </div>
    </header>

    <section>
      <h2>1. CSS å˜é‡ä¸è®¾è®¡ä»¤ç‰Œ</h2>
      <div class="prose">
        <p>å˜é‡é›†ä¸­å®šä¹‰åœ¨ <code>:root</code>ï¼Œç»„ä»¶ä»…æ¶ˆè´¹å˜é‡ã€‚è¿™æ ·å¯å¿«é€Ÿæ¢è‚¤ã€ç»Ÿä¸€é£æ ¼ã€‚</p>
      </div>
      <div class="code">:root{ --color-brand:#3b82f6; --radius:12px }\n.button{ background: var(--color-brand); border-radius: var(--radius) }</div>
    </section>

    <section>
      <h2>2. ä¸»é¢˜åˆ‡æ¢ï¼ˆThemingï¼‰</h2>
      <div class="card">
        <h3 class="card__title">å½“å‰ä¸»é¢˜ï¼š<span id="theme-label">light</span></h3>
        <p class="card__desc">ç‚¹å‡»å³ä¸Šè§’æŒ‰é’®å¯åœ¨æµ…è‰²/æ·±è‰²/è·Ÿéšç³»ç»Ÿä¹‹é—´åˆ‡æ¢ã€‚</p>
        <div class="mt-3">
          <span class="badge badge--info">info</span>
          <span class="badge badge--ok">ok</span>
          <span class="badge badge--warn">warn</span>
        </div>
      </div>
      <div class="code">html[data-theme="dark"]{ --color-bg:#0b1020; --color-text:#e5e7eb /* ... */ }</div>
      <div class="note">å»ºè®®ï¼šç”¨ <code>data-theme</code> æˆ–ç±»ååšä¸»é¢˜å¼€å…³ï¼Œé¿å…ä½¿ç”¨å…¨å±€è¦†ç›–ä¸ !importantã€‚</div>
    </section>

    <section>
      <h2>3. å±‚å å±‚ï¼ˆ@layerï¼‰ç»„ç»‡æ ·å¼</h2>
      <div class="prose">
        <p>å°†æ ·å¼åˆ†ä¸º <strong>base</strong>ï¼ˆåŸºç¡€ï¼‰ã€<strong>components</strong>ï¼ˆç»„ä»¶ï¼‰ã€<strong>utilities</strong>ï¼ˆå·¥å…·ç±»ï¼‰ã€‚
        é€šè¿‡ <code>@layer base, components, utilities;</code> å›ºå®šä¼˜å…ˆé¡ºåºï¼Œå‡å°‘â€œäº’ç›¸è¸©è¸â€ã€‚</p>
      </div>
      <div class="code">@layer base, components, utilities; /* å£°æ˜é¡ºåºå†³å®šä¼˜å…ˆçº§ */</div>
    </section>

    <section>
      <h2>4. ç‰¹å¼‚æ€§ç®¡ç†ï¼š:where() / :is()</h2>
      <div class="prose">
        <p><code>:where()</code> è®©é€‰æ‹©å™¨ç‰¹å¼‚æ€§ä¸º 0ï¼Œä¾¿äºæ›´é«˜å±‚æ ·å¼è¦†ç›–ï¼›<code>:is()</code> ç”¨äºé€‰æ‹©å™¨èšåˆï¼Œé¿å…é‡å¤ã€‚</p>
      </div>
      <nav class="nav card mt-3">
        <a href="#" class="badge badge--info">é¦–é¡µ</a>
        <a href="#" class="badge badge--ok">æ–‡æ¡£</a>
        <button class="badge badge--warn">å…³äº</button>
      </nav>
      <div class="code">:where(.prose) h1{ font-size:2rem }\n.nav :is(a, button){ color:inherit }</div>
    </section>

    <section class="demo-scope">
      <h2 class="title">5. å‘½åä¸ä½œç”¨åŸŸï¼šBEM ä¸å®¹å™¨ä½œç”¨åŸŸ</h2>
      <div class="card">
        <h3 class="card__title">BEMï¼š<code>.block__element--modifier</code></h3>
        <p class="card__desc">ç¤ºä¾‹ï¼š<code>.card__title</code>ã€<code>.badge--ok</code>ã€‚å®¹å™¨ä½œç”¨åŸŸï¼šçˆ¶çº§ç±»é™å®šå­é€‰æ‹©å™¨ï¼Œé¿å…å…¨å±€æ±¡æŸ“ã€‚</p>
      </div>
      <div class="note">å®éªŒæ€§ï¼š<code>@scope</code> æä¾›åŸç”Ÿä½œç”¨åŸŸï¼ˆæµè§ˆå™¨æ”¯æŒå°šæœªå®Œå…¨ä¸€è‡´ï¼Œå¯ä½œä¸ºäº†è§£ï¼‰ã€‚</div>
    </section>

    <section>
      <h2>ç»¼åˆç»ƒä¹ </h2>
      <ol>
        <li>ä¸ºé¡¹ç›®æç‚¼ä¸€å¥— tokensï¼ˆé¢œè‰²/é—´è·/åœ†è§’/é˜´å½±/å­—å·ï¼‰ï¼Œç»Ÿä¸€åœ¨ <code>:root</code> å®šä¹‰ã€‚</li>
        <li>å®ç°æµ…è‰²/æ·±è‰²ä¸»é¢˜åˆ‡æ¢ï¼Œå¹¶è®°ä½ç”¨æˆ·é€‰æ‹©ï¼ˆlocalStorageï¼‰ã€‚</li>
        <li>ç”¨ @layer å°†æ ·å¼åˆ†å±‚ï¼Œå°½é‡é¿å… <code>!important</code>ã€‚</li>
        <li>åœ¨ä¸€æ®µæ–‡æ¡£åŒºä½¿ç”¨ <code>:where()</code> é™ä½ç‰¹å¼‚æ€§ï¼ŒéªŒè¯è¦†ç›–å…³ç³»ã€‚</li>
      </ol>
    </section>

    <footer style="text-align:center; color:var(--color-muted)">
      <p>&copy; 2024 CSS ç¬¬13æ­¥ Â· å˜é‡ã€ä¸»é¢˜ã€å±‚å ä¸å·¥ç¨‹åŒ–</p>
    </footer>
  </div>

  <script>
    // ä¸»é¢˜åˆ‡æ¢ä¸è®°å¿†
    (function(){
      const THEME_KEY = 'learn_css_theme';
      const root = document.documentElement;
      const label = document.getElementById('theme-label');

      function applyTheme(theme){
        root.setAttribute('data-theme', theme);
        label && (label.textContent = theme);
      }
      function loadTheme(){
        const saved = localStorage.getItem(THEME_KEY);
        applyTheme(saved || 'light');
      }
      loadTheme();

      document.addEventListener('click', (e)=>{
        const t = e.target;
        if(t && t.matches('button[data-theme]')){
          const theme = t.getAttribute('data-theme');
          applyTheme(theme);
          localStorage.setItem(THEME_KEY, theme);
        }
      });
    })();
  </script>
</body>
</html>
